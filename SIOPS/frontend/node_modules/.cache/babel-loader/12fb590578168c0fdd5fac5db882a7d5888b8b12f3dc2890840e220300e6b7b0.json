{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sistem Ta1\\\\SIOPS\\\\frontend\\\\src\\\\App.js\";\nimport { createBrowserRouter, RouterProvider } from \"react-router-dom\";\nimport Login from \"./components/Page/Home/Login\";\nimport OrderStock from \"./components/Page/Order/OrderStock\";\nimport DashboardAdmin from \"./components/Page/Sidebar/admin/DashboardAdmin\";\nimport DashboardStaff from \"./components/Page/Sidebar/staff/DashboardStaff\";\nimport DashboardLayout from \"./components/Page/Home/DashboardLayout\";\nimport UserProfile from \"./components/Page/Profile/UserProfile\";\nimport Product from \"./components/Page/Product/Product\";\n\n// Helper functions\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst isAuthenticated = () => {\n  const token = localStorage.getItem('token');\n  if (!token) return false;\n  try {\n    const userData = JSON.parse(atob(token.split('.')[1]));\n    const currentTime = Math.floor(Date.now() / 1000);\n    return userData.exp > currentTime;\n  } catch {\n    return false;\n  }\n};\nconst getUserRole = () => {\n  const token = localStorage.getItem('token');\n  if (!token) return null;\n  try {\n    const userData = JSON.parse(atob(token.split('.')[1]));\n    return userData.role || null;\n  } catch {\n    return null;\n  }\n};\n\n// Router configuration\nconst router = createBrowserRouter([{\n  path: \"/login\",\n  element: !isAuthenticated() ? /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 35\n  }, this) : null,\n  loader: () => {\n    if (isAuthenticated()) {\n      const role = getUserRole();\n      throw redirect(role === 'admin' ? '/dashboardAdmin' : '/dashboard');\n    }\n    return null;\n  }\n}, {\n  path: \"/\",\n  element: /*#__PURE__*/_jsxDEV(DashboardLayout, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 14\n  }, this),\n  loader: () => {\n    if (!isAuthenticated()) {\n      throw redirect('/login');\n    }\n    return null;\n  },\n  children: [{\n    index: true,\n    loader: () => {\n      const role = getUserRole();\n      throw redirect(role === 'admin' ? '/dashboardAdmin' : '/dashboard');\n    }\n  }, {\n    path: \"dashboardAdmin\",\n    element: /*#__PURE__*/_jsxDEV(DashboardAdmin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 18\n    }, this),\n    loader: () => {\n      if (getUserRole() !== 'admin') {\n        throw redirect('/dashboard');\n      }\n      return null;\n    }\n  }, {\n    path: \"dashboard\",\n    element: /*#__PURE__*/_jsxDEV(DashboardStaff, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 18\n    }, this),\n    loader: () => {\n      if (getUserRole() === 'admin') {\n        throw redirect('/dashboardAdmin');\n      }\n      return null;\n    }\n  }, {\n    path: \"product\",\n    element: /*#__PURE__*/_jsxDEV(Product, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 18\n    }, this),\n    loader: () => {\n      const role = getUserRole();\n      if (!['admin', 'staff'].includes(role)) {\n        throw redirect('/');\n      }\n      return null;\n    }\n  }, {\n    path: \"order\",\n    element: /*#__PURE__*/_jsxDEV(OrderStock, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 18\n    }, this),\n    loader: () => {\n      if (!isAuthenticated()) {\n        throw redirect('/login');\n      }\n      return null;\n    }\n  }, {\n    path: \"userprofile\",\n    element: /*#__PURE__*/_jsxDEV(UserProfile, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 18\n    }, this),\n    loader: () => {\n      if (!isAuthenticated()) {\n        throw redirect('/login');\n      }\n      return null;\n    }\n  }, {\n    path: \"*\",\n    loader: () => {\n      const role = getUserRole();\n      throw redirect(role === 'admin' ? '/dashboardAdmin' : '/dashboard');\n    }\n  }]\n}], {\n  future: {\n    v7_startTransition: true,\n    v7_relativeSplatPath: true\n  }\n});\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(RouterProvider, {\n    router: router\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 10\n  }, this);\n}\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["createBrowserRouter","RouterProvider","Login","OrderStock","DashboardAdmin","DashboardStaff","DashboardLayout","UserProfile","Product","jsxDEV","_jsxDEV","isAuthenticated","token","localStorage","getItem","userData","JSON","parse","atob","split","currentTime","Math","floor","Date","now","exp","getUserRole","role","router","path","element","fileName","_jsxFileName","lineNumber","columnNumber","loader","redirect","children","index","includes","future","v7_startTransition","v7_relativeSplatPath","App","_c","$RefreshReg$"],"sources":["D:/Sistem Ta1/SIOPS/frontend/src/App.js"],"sourcesContent":["import { createBrowserRouter, RouterProvider } from \"react-router-dom\";\nimport Login from \"./components/Page/Home/Login\";\nimport OrderStock from \"./components/Page/Order/OrderStock\";\nimport DashboardAdmin from \"./components/Page/Sidebar/admin/DashboardAdmin\";\nimport DashboardStaff from \"./components/Page/Sidebar/staff/DashboardStaff\";\nimport DashboardLayout from \"./components/Page/Home/DashboardLayout\";\nimport UserProfile from \"./components/Page/Profile/UserProfile\";\nimport Product from \"./components/Page/Product/Product\";\n\n// Helper functions\nconst isAuthenticated = () => {\n  const token = localStorage.getItem('token');\n  if (!token) return false;\n  \n  try {\n    const userData = JSON.parse(atob(token.split('.')[1]));\n    const currentTime = Math.floor(Date.now() / 1000);\n    return userData.exp > currentTime;\n  } catch {\n    return false;\n  }\n};\n\nconst getUserRole = () => {\n  const token = localStorage.getItem('token');\n  if (!token) return null;\n  \n  try {\n    const userData = JSON.parse(atob(token.split('.')[1]));\n    return userData.role || null;\n  } catch {\n    return null;\n  }\n};\n\n// Router configuration\nconst router = createBrowserRouter([\n  {\n    path: \"/login\",\n    element: !isAuthenticated() ? <Login /> : null,\n    loader: () => {\n      if (isAuthenticated()) {\n        const role = getUserRole();\n        throw redirect(role === 'admin' ? '/dashboardAdmin' : '/dashboard');\n      }\n      return null;\n    },\n  },\n  {\n    path: \"/\",\n    element: <DashboardLayout />,\n    loader: () => {\n      if (!isAuthenticated()) {\n        throw redirect('/login');\n      }\n      return null;\n    },\n    children: [\n      {\n        index: true,\n        loader: () => {\n          const role = getUserRole();\n          throw redirect(role === 'admin' ? '/dashboardAdmin' : '/dashboard');\n        },\n      },\n      {\n        path: \"dashboardAdmin\",\n        element: <DashboardAdmin />,\n        loader: () => {\n          if (getUserRole() !== 'admin') {\n            throw redirect('/dashboard');\n          }\n          return null;\n        },\n      },\n      {\n        path: \"dashboard\",\n        element: <DashboardStaff />,\n        loader: () => {\n          if (getUserRole() === 'admin') {\n            throw redirect('/dashboardAdmin');\n          }\n          return null;\n        },\n      },\n      {\n        path: \"product\",\n        element: <Product />,\n        loader: () => {\n          const role = getUserRole();\n          if (!['admin', 'staff'].includes(role)) {\n            throw redirect('/');\n          }\n          return null;\n        },\n      },\n      {\n        path: \"order\",\n        element: <OrderStock />,\n        loader: () => {\n          if (!isAuthenticated()) {\n            throw redirect('/login');\n          }\n          return null;\n        },\n      },\n      {\n        path: \"userprofile\",\n        element: <UserProfile />,\n        loader: () => {\n          if (!isAuthenticated()) {\n            throw redirect('/login');\n          }\n          return null;\n        },\n      },\n      {\n        path: \"*\",\n        loader: () => {\n          const role = getUserRole();\n          throw redirect(role === 'admin' ? '/dashboardAdmin' : '/dashboard');\n        },\n      },\n    ],\n  },\n], {\n  future: {\n    v7_startTransition: true,\n    v7_relativeSplatPath: true\n  }\n});\n\nfunction App() {\n  return <RouterProvider router={router} />;\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}